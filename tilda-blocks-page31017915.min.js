window.isMobile = !1;
if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
    window.isMobile = !0
}

function t_throttle(fn, threshhold, scope) {
    var last;
    var deferTimer;
    threshhold || (threshhold = 250);
    return function () {
        var context = scope || this;
        var now = +new Date();
        var args = arguments;
        if (last && now < last + threshhold) {
            clearTimeout(deferTimer);
            deferTimer = setTimeout(function () {
                last = now;
                fn.apply(context, args)
            }, threshhold)
        } else {
            last = now;
            fn.apply(context, args)
        }
    }
}

function t450_showMenu(recid) {
    var rec = document.getElementById('rec' + recid);
    if (!rec) return;
    var menu = rec.querySelector('.t450');
    var overlay = rec.querySelector('.t450__overlay');
    var menuElements = rec.querySelectorAll('.t450__overlay, .t450__close, a[href*="#"]');
    document.body.classList.add('t450__body_menushowed');
    if (menu) menu.classList.add('t450__menu_show');
    if (overlay) overlay.classList.add('t450__menu_show');
    if (menu) {
        menu.addEventListener('clickedAnchorInTooltipMenu', function () {
            t450_closeMenu(menu, overlay)
        })
    }
    Array.prototype.forEach.call(menuElements, function (element) {
        element.addEventListener('click', function () {
            if (element.closest('.tooltipstered, .t-menusub__target-link, .t794__tm-link, .t966__tm-link, .t978__tm-link')) return;
            if (element.href && (element.href.substring(0, 7) === '#price:' || element.href.substring(0, 9) === '#submenu:')) return;
            t450_closeMenu(menu, overlay)
        })
    });
    document.addEventListener('keydown', function (e) {
        if (e.keyCode === 27) {
            document.body.classList.remove('t390__body_popupshowed');
            var popups = document.querySelectorAll('.t390');
            Array.prototype.forEach.call(popups, function (popup) {
                popup.classList.remove('t390__popup_show')
            })
        }
    });
    rec.addEventListener('click', function (e) {
        if (e.target.closest('.t966__tm-link, .t978__tm-link')) {
            t450_checkSize(recid);
            if (e.target.closest('.t978__tm-link')) {
                setTimeout(function () {
                    var hookLink = e.target.closest('.t978__tm-link');
                    var menuBlock = hookLink.nextElementSibling;
                    var submenuLinks = menuBlock ? menuBlock.querySelectorAll('.t978__menu-link') : [];
                    Array.prototype.forEach.call(submenuLinks, function (link) {
                        link.addEventListener('click', function () {
                            t450_checkSize(recid)
                        })
                    })
                }, 300)
            }
        }
    });
    menu.addEventListener('menuOverflow', function () {
        t450_checkSize(recid)
    });
    t450_highlight(recid)
}

function t450_closeMenu(menu, overlay) {
    document.body.classList.remove('t450__body_menushowed');
    if (menu) menu.classList.remove('t450__menu_show');
    if (overlay) overlay.classList.remove('t450__menu_show')
}

function t450_checkSize(recid) {
    var rec = document.getElementById('rec' + recid);
    var menu = rec ? rec.querySelector('.t450') : null;
    if (!menu) return;
    var container = menu.querySelector('.t450__container');
    var topContainer = menu.querySelector('.t450__top');
    var rightContainer = menu.querySelector('.t450__rightside');
    setTimeout(function () {
        var topContainerHeight = topContainer ? topContainer.offsetHeight : 0;
        var rightContainerHeight = rightContainer ? rightContainer.offsetHeight : 0;
        var containerPaddingTop = container ? window.getComputedStyle(container).paddingTop : '0';
        var containerPaddingBottom = container ? window.getComputedStyle(container).paddingBottom : '0';
        containerPaddingTop = parseInt(containerPaddingTop, 10);
        containerPaddingBottom = parseInt(containerPaddingBottom, 10);
        if (topContainerHeight + rightContainerHeight + containerPaddingTop + containerPaddingBottom > document.documentElement.clientHeight) {
            menu.classList.add('t450__overflowed')
        } else {
            menu.classList.remove('t450__overflowed')
        }
    })
}

function t450_appearMenu(recid) {
    var rec = document.getElementById('rec' + recid);
    var burger = rec ? rec.querySelector('.t450__menu__content') : null;
    if (!burger) return;
    var burgerAppearOffset = burger ? burger.getAttribute('data-appearoffset') : '';
    var burgerHideOffset = burger ? burger.getAttribute('data-hideoffset') : '';
    if (burgerAppearOffset) {
        burgerAppearOffset = t450_appearMenuParseNumber(burgerAppearOffset);
        if (window.pageYOffset >= burgerAppearOffset) {
            if (burger.classList.contains('t450__beforeready')) {
                burger.classList.remove('t450__beforeready')
            }
        } else {
            burger.classList.add('t450__beforeready')
        }
    }
    if (burgerHideOffset) {
        burgerHideOffset = t450_appearMenuParseNumber(burgerHideOffset);
        var scrollHeight = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight);
        if (window.pageYOffset + window.innerHeight >= scrollHeight - burgerHideOffset) {
            if (!burger.classList.contains('t450__beforeready')) {
                burger.classList.add('t450__beforeready')
            }
        } else if (burgerAppearOffset) {
            if (window.pageYOffset >= burgerAppearOffset) {
                burger.classList.remove('t450__beforeready')
            }
        } else {
            burger.classList.remove('t450__beforeready')
        }
    }
}

function t450_appearMenuParseNumber(string) {
    if (string.indexOf('vh') > -1) {
        string = Math.floor((window.innerHeight * (parseInt(string) / 100)))
    }
    return parseInt(string, 10)
}

function t450_initMenu(recid) {
    var rec = document.getElementById('rec' + recid);
    var menu = rec ? rec.querySelector('.t450') : null;
    var overlay = rec ? rec.querySelector('.t450__overlay') : null;
    var burger = rec ? rec.querySelector('.t450__burger_container') : null;
    var menuLinks = rec ? rec.querySelectorAll('.t-menu__link-item.t450__link-item_submenu') : [];
    var hook = menu ? menu.getAttribute('data-tooltip-hook') : '';
    if (hook) {
        document.addEventListener('click', function (e) {
            if (e.target.closest('a[href="' + hook + '"]')) {
                e.preventDefault();
                t450_closeMenu(menu, overlay);
                t450_showMenu(recid);
                t450_checkSize(recid)
            }
        })
    }
    if (burger) {
        burger.addEventListener('click', function () {
            t450_closeMenu(menu, overlay);
            t450_showMenu(recid);
            t450_checkSize(recid)
        })
    }
    window.addEventListener('resize', function () {
        t450_checkSize(recid)
    });
    if (!window.isMobile) return;
    Array.prototype.forEach.call(menuLinks, function (link) {
        link.addEventListener('click', function () {
            t450_checkSize(recid)
        })
    })
}

function t450_highlight(recid) {
    var url = window.location.href;
    var pathname = window.location.pathname;
    var hash = window.location.hash;
    if (url.substr(url.length - 1) === '/') {
        url = url.slice(0, -1)
    }
    if (pathname.substr(pathname.length - 1) === '/') {
        pathname = pathname.slice(0, -1)
    }
    if (pathname.charAt(0) === '/') {
        pathname = pathname.slice(1)
    }
    if (pathname === '') {
        pathname = '/'
    }
    var shouldBeActiveElements = document.querySelectorAll('.t450__menu a[href=\'' + url + '\'], ' + '.t450__menu a[href=\'' + url + '/\'], ' + '.t450__menu a[href=\'' + pathname + '\'], ' + '.t450__menu a[href=\'/' + pathname + '\'], ' + '.t450__menu a[href=\'' + pathname + '/\'], ' + '.t450__menu a[href=\'/' + pathname + '/\']' + (hash ? ', .t450__menu a[href=\'' + hash + '\']' : ''));
    var rec = document.getElementById('rec' + recid);
    var menuLinks = rec ? rec.querySelectorAll('.t450__menu a') : [];
    Array.prototype.forEach.call(menuLinks, function (link) {
        link.classList.remove('t-active')
    });
    Array.prototype.forEach.call(shouldBeActiveElements, function (link) {
        link.classList.add('t-active')
    })
}

function t772_init(recId) {
    var rec = document.getElementById('rec' + recId);
    if (!rec) return;
    var container = rec.querySelector('.t772__container_mobile-flex');
    if (!container) return;
    var allRecords = document.getElementById('allrecords');
    if (!allRecords.getAttribute('data-tilda-mode') && (window.lazy === 'y' || allRecords.getAttribute('data-tilda-lazy') === 'yes')) {
        t_onFuncLoad('t_lazyload_update', function () {
            container.addEventListener('scroll', t_throttle(function () {
                t_lazyload_update()
            }))
        })
    }
}

function t400_init(recId) {
    var rec = document.getElementById('rec' + recId);
    if (!rec) return;
    var container = rec.querySelector('.t400');
    if (!container) return;
    var button = rec.querySelector('.t400__submit');
    var hideBackText = button.getAttribute('data-hide-back-text');
    var showMoreText = button.textContent;
    button.addEventListener('click', function () {
        if (hideBackText && button.classList.contains('t400__submit_hide-back')) {
            t400_alltabs_updateContent(recId);
            button.classList.remove('t400__submit_hide-back');
            if (button.classList.contains('t400__submit-overflowed')) {
                button.innerHTML = '<span class="t400__text">' + showMoreText + '</span>'
            } else {
                button.innerHTML = showMoreText
            }
            var zeroBlocks = document.querySelectorAll('.t396');
            for (var i = 0; i < zeroBlocks.length; i++) {
                t400__triggerEvent(zeroBlocks[i], 'displayChanged')
            }
            return
        }
        var recIds = button.getAttribute('data-hidden-rec-ids').split(',');
        for (var i = 0; i < recIds.length; i++) {
            var recShowBlock = document.getElementById('rec' + recIds[i]);
            if (recShowBlock) {
                recShowBlock.classList.remove('t400__off');
                recShowBlock.style.opacity = '';
                var videos = recShowBlock.querySelectorAll('.t-video-lazyload');
                if (videos.length > 0) {
                    var video = videos[0];
                    if (video.closest('.t121') || video.closest('.t223') || video.closest('.t230') || video.closest('.t368')) {
                        t400_updateVideoLazyLoad(videos)
                    }
                }
                var selectors = recShowBlock.querySelectorAll('.t-feed, .t-store, .t-store__product-snippet, .t117, .t121, .t132, .t223, .t226, .t228, .t229, .t230, .t268, .t279, .t341, .t346, .t347, .t349, .t351, .t353, .t384, .t385, .t386, .t396, .t400, .t404, .t409, .t410, .t412, .t418, .t422, .t425, .t428, .t433, .t456, .t477, .t478, .t480, .t486, .t498, .t504, .t506, .t509, .t511, .t517, .t518, .t519, .t520, .t527, .t531, .t532, .t533, .t538, .t539, .t544, .t545, .t552, .t554, .t570, .t577, .t592, .t598, .t599, .t601, .t604, .t605, .t609, .t615, .t616, .t650, .t659, .t670, .t675, .t686, .t688, .t694, .t698, .t700, .t726, .t728, .t730, .t734, .t738, .t740, .t744, .t754, .t760, .t762, .t764, .t774, .t776, .t778, .t780, .t786, .t798, .t799, .t801, .t813, .t814, .t822, .t826, .t827, .t829, .t842, .t843, .t849, .t850, .t851, .t856, .t858, .t859, .t860, .t881, .t889, .t899, .t902, .t905, .t912, .t923, .t937, .t958, .t959, .t979, .t982, .t983, .t989, .t994, .t1000, .t1003, .t1067, .t1068, .t1069, .t1070, .t1071, .t1072, .t1053');
                for (var j = 0; j < selectors.length; j++) {
                    t400__triggerEvent(selectors[j], 'displayChanged')
                }
            }
        }
        if (hideBackText) {
            button.classList.add('t400__submit_hide-back');
            if (button.classList.contains('t400__submit-overflowed')) {
                button.innerHTML = '<span class="t400__text">' + hideBackText + '</span>'
            } else {
                button.innerHTML = hideBackText
            }
        } else {
            rec.classList.add('t400__off');
            rec.style.display = 'none'
        }
        if (window.lazy === 'y' || document.getElementById('allrecords').getAttribute('data-tilda-lazy') === 'yes') {
            t_onFuncLoad('t_lazyload_update', function () {
                t_lazyload_update()
            })
        }
    });
    t400_alltabs_updateContent(recId);
    t400_checkSize(recId);
    if (typeof jQuery !== 'undefined') {
        $(container).bind('displayChanged', function () {
            t400_checkSize(recId)
        })
    } else {
        container.addEventListener('displayChanged', function () {
            t400_checkSize(recId)
        })
    }
}

function t400_alltabs_updateContent(recId) {
    var rec = document.getElementById('rec' + recId);
    if (!rec) return;
    var button = rec.querySelector('.t400__submit');
    if (!button) return;
    var recIds = button.getAttribute('data-hidden-rec-ids').split(',');
    for (var i = 0; i < recIds.length; i++) {
        var recHideBlock = document.getElementById('rec' + recIds[i]);
        if (!recHideBlock) continue;
        recHideBlock.setAttribute('data-animationappear', 'off');
        recHideBlock.setAttribute('data-connect-with-tab', 'yes');
        recHideBlock.classList.add('t400__off')
    }
}

function t400_checkSize(recId) {
    var rec = document.getElementById('rec' + recId);
    if (!rec) return;
    var button = rec.querySelector('.t400__submit');
    if (!button) return;
    var buttonStyle = getComputedStyle(button, null);
    var buttonPaddingTop = parseInt(buttonStyle.paddingTop) || 0;
    var buttonPaddingBottom = parseInt(buttonStyle.paddingBottom) || 0;
    var buttonHeight = button.clientHeight - (buttonPaddingTop + buttonPaddingBottom);
    var buttonScrollHeight = button.scrollHeight;
    if (buttonHeight < buttonScrollHeight) {
        var buttonText = button.textContent;
        button.classList.add('t400__submit-overflowed');
        button.innerHTML = '<span class="t400__text">' + buttonText + '</span>'
    }
}

function t400_updateVideoLazyLoad(videos) {
    setTimeout(function () {
        for (var i = 0; i < videos.length; i++) {
            var video = videos[i];
            var videoHeight = video.getAttribute('data-videolazy-height') || '100%';
            if (videoHeight.indexOf('vh') !== -1) {
                videoHeight = '100%'
            }
            var videoId = video.getAttribute('data-videolazy-id').trim();
            var blockId = video.getAttribute('data-blocklazy-id') || '';
            var videoTwoId = video.getAttribute('data-videolazy-two-id') || '';
            if (videoTwoId) videoTwoId = '_' + videoTwoId + '_';
            if (video.getAttribute('data-videolazy-type') === 'youtube') {
                var iframes = video.querySelectorAll('iframe');
                for (var j = 0; j < iframes.length; j++) {
                    var oldFrame = iframes[j];
                    if (oldFrame && oldFrame.parentNode) oldFrame.parentNode.removeChild(oldFrame)
                }
                var iframe = document.createElement('iframe');
                iframe.id = 'youtubeiframe' + videoTwoId + blockId;
                iframe.width = '100%';
                iframe.height = videoHeight;
                iframe.src = '//www.youtube.com/embed/' + videoId + '?rel=0&fmt=18&html5=1&showinfo=0';
                iframe.setAttribute('frameborder', '0');
                iframe.setAttribute('allowfullscreen', '');
                video.insertBefore(iframe, video.firstChild)
            }
        }
    })
}

function t400__triggerEvent(el, eventName) {
    var event;
    if (typeof window.CustomEvent === 'function') {
        event = new CustomEvent(eventName)
    } else if (document.createEvent) {
        event = document.createEvent('HTMLEvents');
        event.initEvent(eventName, !0, !1)
    } else if (document.createEventObject) {
        event = document.createEventObject();
        event.eventType = eventName
    }
    event.eventName = eventName;
    if (el.dispatchEvent) {
        el.dispatchEvent(event)
    } else if (el.fireEvent) {
        el.fireEvent('on' + event.eventType, event)
    } else if (el[eventName]) {
        el[eventName]()
    } else if (el['on' + eventName]) {
        el['on' + eventName]()
    }
}

function t1061_initThumbnail(rec) {
    t_onFuncLoad('t1061_setThumbnailHeight', function () {
        t1061_setThumbnailHeight(rec)
    });
    t_onFuncLoad('t1061_setThumbnail', function () {
        t1061_setThumbnail(rec)
    });
    t_onFuncLoad('t1061_setYouTubeIframeHeight', function () {
        t1061_setYouTubeIframeHeight(rec)
    })
}

function t1061_setThumbnail(rec) {
    var thumbnails = rec.querySelectorAll('.t1061__video-thumbnail');
    if (!thumbnails.length) return;
    Array.prototype.forEach.call(thumbnails, function (thumbnail) {
        var blockTop = thumbnail.getBoundingClientRect().top;
        var windowHeight = document.documentElement.clientHeight;
        var scrollDiffHeigth = 400;
        if (window.pageYOffset > blockTop - windowHeight - scrollDiffHeigth) {
            var youTubeID = thumbnail.getAttribute('data-youtube-id').trim();
            thumbnail.style.backgroundImage = 'url("https://img.youtube.com/vi/' + youTubeID + '/sddefault.jpg")';
            thumbnail.addEventListener('click', function (event) {
                event.preventDefault();
                var youTubeWrapper = thumbnail.parentNode;
                var youTubeIframe = '<iframe class="t1061__youtube-iframe" width="100%" height="" src="https://www.youtube.com/embed/' + youTubeID + '?autoplay=1&rel=0" frameborder="0" allow="autoplay" allowfullscreen></iframe>';
                thumbnail.innerHTML = youTubeIframe;
                t1061_setYouTubeIframeHeight(rec)
            })
        }
    })
}

function t1061_setThumbnailHeight(rec) {
    var thumbnail = rec.querySelectorAll('.t1061__video-thumbnail');
    if (!thumbnail.length) return;
    Array.prototype.forEach.call(thumbnail, function (image) {
        var imageWidth = image.offsetWidth;
        var computedHeight = imageWidth / (16 / 9);
        image.style.height = computedHeight + 'px'
    })
}

function t1061_setYouTubeIframeHeight(rec) {
    var youTubeIframes = rec.querySelectorAll('iframe');
    if (!youTubeIframes.length) return;
    Array.prototype.forEach.call(youTubeIframes, function (youTubeIframe) {
        var iframeParent = youTubeIframe.parentNode;
        var iframeParentWidth = iframeParent.offsetWidth;
        var computedHeight = iframeParentWidth / (16 / 9);
        youTubeIframe.height = computedHeight
    })
}

function t389_scrollToTop() {
    var duration = 700;
    var difference = window.pageYOffset;
    var step = 10 * difference / duration;
    var timer = setInterval(function () {
        difference -= step;
        window.scrollTo(0, difference);
        document.body.setAttribute('data-scrollable', 'true');
        if (window.pageYOffset === 0) {
            document.body.removeAttribute('data-scrollable');
            clearInterval(timer)
        }
    }, 10)
}